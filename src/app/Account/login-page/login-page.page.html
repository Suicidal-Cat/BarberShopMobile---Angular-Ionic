<ion-content [fullscreen]="true">
  <div class="login-container">
    <div calss="card">
      <div class="card-header">
        <ion-img
          src="../../../assets/images/logo.png"
          alt="logo"
          class="logo"
        ></ion-img>
        <h1>Welcome!</h1>
      </div>

      <div class="card-content">
        <p>Sign in to your account</p>
        <div *ngIf="showError" style="margin-bottom: 10px;text-align: center;">
          <ion-text color="danger">{{errorMessage}}</ion-text>
        </div>
        <form #loginForm="ngForm" (ngSubmit)="loginUser(loginForm)">
          <!-- <ion-item lines="none"> -->
          <ion-input
            label="Email"
            labelPlacement="floating"
            fill="outline"
            placeholder=""
            type="email"
            required
            email
            ngModel
            name="Email"
            #emailE="ngModel"
            pattern="^[a-zA-Z0-9._%+\-]+@[a-zA-Z0-9.\-]+\.[a-zA-Z]{2,}$"
            class="ion-input-form"
          ></ion-input>
          <!-- </ion-item > -->
          <!-- <ion-text  *ngIf="emailE.dirty && emailE.errors?.['email']" color="danger">Invalid email address</ion-text> -->
          <!-- <ion-item lines="none"> -->
          <ion-input
            label="Password"
            labelPlacement="floating"
            fill="outline"
            placeholder=""
            type="password"
            required
            minlength="8"
            ngModel
            name="Password"
            #passwordE="ngModel"
            class="ion-input-form"
          ></ion-input>
          <ion-text
            *ngIf="passwordE.dirty && passwordE.errors?.['minlength']"
            color="danger"
            >Password must have at least 8 characters</ion-text
          >
          <!-- </ion-item> -->

          <ion-button
            expand="block"
            type="submit"
            class="login-button"
            [disabled]="loginForm.invalid"
            class="ion-button-form"
          >
            <div *ngIf="showSpinner">
              <ion-spinner></ion-spinner>
            </div>
            <div *ngIf="!showSpinner">Sign in</div>
          </ion-button>
        </form>
        <ion-button
          class="ion-float-left"
          fill="clear"
          style="text-transform: initial;margin: 0;width: 100%;text-align: center;"
          (click)="showPasswordModal()"
          >Forgot your password?</ion-button
        >
        
        <ion-button
        class="ion-float-left"
        fill="clear"
        style="text-transform: initial;margin: 0;width: 100%;text-align: center;margin-bottom: 40px;"
        (click)="showEmailModal()"
        >Resend confirmation link</ion-button
        >
        <div style="text-align: center;">
          Don't have an account?
          <div  style="color: var(--ion-color-primary);cursor: pointer;display: inline-block;" routerLink="/register">
            Sign Up
          </div>
        </div>
      </div>
    </div>
  </div>
</ion-content>

<app-email-confirm-modal [isOpen]="emailModal" (closeModal)="closeEmailModal()"></app-email-confirm-modal>
<app-password-reset-modal [isOpen]="passwordModal" (closeModal)="closePasswordModal()"></app-password-reset-modal>

